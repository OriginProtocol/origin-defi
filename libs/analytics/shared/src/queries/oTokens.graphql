query oTokenStats(
  $token: String!
  $chainId: Int!
  $limit: Int
  $orderBy: [OTokenDailyStatOrderByInput!] = [timestamp_DESC]
  $from: DateTime
) {
  oTokenDailyStats(
    limit: $limit
    orderBy: $orderBy
    where: {
      otoken_containsInsensitive: $token
      chainId_eq: $chainId
      timestamp_gte: $from
    }
  ) {
    id
    timestamp
    totalSupply
    apy
    apy7
    apy14
    apy30
    rateETH
    rateUSD
    rebasingSupply
    nonRebasingSupply
    wrappedSupply
    amoSupply
    yield
    fees
  }
}

query oTokenStatsConnection(
  $token: String!
  $chainId: Int!
  $orderBy: [OTokenDailyStatOrderByInput!] = [timestamp_DESC]
  $first: Int
  $after: String
  $from: DateTime
) {
  oTokenDailyStatsConnection(
    orderBy: $orderBy
    where: {
      otoken_containsInsensitive: $token
      chainId_eq: $chainId
      timestamp_gte: $from
    }
    first: $first
    after: $after
  ) {
    edges {
      node {
        id
        timestamp
        rebasingSupply
        yield
        fees
        apy
      }
    }
    totalCount
  }
}

query oTokenStatAndRebaseById(
  $id: String!
  $token: String!
  $chainId: Int!
  $orderBy: [OTokenRebaseOrderByInput!] = [timestamp_DESC]
  $from: DateTime
  $to: DateTime
) {
  oTokenDailyStatById(id: $id) {
    rebasingSupply
    timestamp
    yield
    apy
    fees
    amoSupply
    totalSupply
    nonRebasingSupply
  }
  oTokenRebases(
    orderBy: $orderBy
    where: {
      timestamp_gte: $from
      timestamp_lt: $to
      otoken_containsInsensitive: $token
      chainId_eq: $chainId
    }
  ) {
    blockNumber
    feeETH
    totalSupply
    txHash
    yieldETH
    timestamp
  }
}
