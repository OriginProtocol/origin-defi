query HistoryPage($address: String!, $offset: Int!, $filters: [HistoryType!]) {
  oethAddresses(where: { id_containsInsensitive: $address }) {
    balance
    earned
    isContract
    rebasingOption
    lastUpdated
    history(
      limit: 20
      orderBy: timestamp_DESC
      offset: $offset
      where: { type_in: $filters }
    ) {
      type
      value
      txHash
      timestamp
      balance
    }
  }
}

query HistoryApy {
  oethapies(limit: 1, orderBy: timestamp_DESC) {
    apy7DayAvg
    apy30DayAvg
  }
}

query HistoryTransaction(
  $address: String!
  $dateStart: DateTime!
  $dateEnd: DateTime!
  $filters: [HistoryType!]
) {
  oethAddresses(where: { id_containsInsensitive: $address }) {
    lastUpdated
    history(
      orderBy: timestamp_DESC
      where: {
        AND: {
          timestamp_gte: $dateStart
          timestamp_lte: $dateEnd
          type_in: $filters
        }
      }
    ) {
      type
      value
      txHash
      timestamp
      balance
    }
  }
}
